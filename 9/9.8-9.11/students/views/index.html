<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>index</title>
    <!-- <link rel="stylesheet" href="../../css/bootstrap.css">
    <script src="../../js/vue.js"></script> -->
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.2/dist/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
</head>
<body>
    <!-- <i class="glyphicon glyphicon-ok"></i> -->
    <section id="app">
        <div class="cover" @click="coverControl"></div>
        <div class="col-sm-2">
            <button class="btn btn-primary" @click="addFormControl">新增</button>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-sm-10 col-sm-offset-1">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>学号</th>
                                <th>姓名</th>
                                <th>年龄</th>
                                <th>性别</th>
                                <th>专业</th>
                                <th>班级</th>
                                <th class="operate">操作</th>
                            </tr>
                        </thead>
                        <tbody id="content">
                            <% result.forEach(element => { %>
                                <tr>
                                    <td><%= element['id'] %></td>
                                    <td mayChange><%= element['name'] %></td>
                                    <td mayChange><%= element['age'] %></td>
                                    <td mayChange><%= element['gender']==1?'男':'女' %></td>
                                    <td mayChange><%= element['major'] %></td>
                                    <td mayChange><%= element['class'] %></td>
                                    <td> 
                                        <button class="btn btn-info info-btn" uid="<%= element['id'] %>" disabled><span>变更</span> <i class="glyphicon"></i></button>
                                        <button class="btn btn-danger del-btn" uid="<%= element['id'] %>">删除</button> 
                                    </td>
                                </tr>
                            <% }); %> 
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="add-form">
            <div class="col-sm-12">
                <add-form></add-form>
            </div>
        </div>
    </section>
    <template id="addForm">
        <form>
            <div class="form-group">
                <label for="name">姓名</label>
                <input type="text" class="form-control" id="name" name="name" placeholder="姓名" autocomplete="off">
            </div>
            <div class="form-group">
                <label for="age">年龄</label>
                <input type="text" class="form-control" id="age" name="age" placeholder="年龄" autocomplete="off">
            </div>
            <div class="form-group">
                <label for="gender">性别</label>
                <input type="text" class="form-control" id="gender" name="gender" placeholder="性别" autocomplete="off">
            </div>
            <div class="form-group">
                <label for="major">专业</label>
                <input type="text" class="form-control" id="major" name="major" placeholder="专业" autocomplete="off">
            </div>
            <div class="form-group">
                <label for="classes">班级</label>
                <input type="text" class="form-control" id="classes" name="classes" placeholder="班级" autocomplete="off">
            </div>
            <button class="btn btn-primary">提交</button>
        </form>
    </template>
    <script>

        // 打开添加表单
        function showAddForm() {
            $('.cover, .add-form').addClass('on');
            $('#name').focus();
        }

        // 隐藏添加表单
        function hideAddForm() {
            $('.cover, .add-form').removeClass('on');
        }

        Vue.component('add-form', {
            template: '#addForm',
        })

        let vue = new Vue({
            el: '#app',
            data: {
                
            },
            methods: {
                addFormControl() {
                    showAddForm();
                },
                coverControl() {
                    hideAddForm();
                }
            }
        })

    </script>
    <script src="/js/index.js"></script>
</body>
</html>